@using Do_An_Chuyen_Nganh.Models.ViewModels;
@model ProductListViewModel;
     
<section class="product spad">
    <div class="container">
        <div class="row">

            <div class="col-lg-12 col-md-12">
                <div class="row">


                    @if (Model.Products.Any())
                    {
                        @foreach (var item in Model.Products)
                        {
                            @*var imagePath = Model.FirstImages.ContainsKey(item.Id) ? Model.FirstImages[item.Id] : "path/to/default/image.jpg"; *@


                            var imagePath = Model.FirstImages != null && Model.FirstImages.ContainsKey(item.Id)
                            ? Model.FirstImages[item.Id]
                            : "path/to/default/image.jpg";
                            <div class="col-lg-4 col-md-6 col-sm-6">
                                <div class="product__item">
                                    <div class="product__item__pic set-bg" data-setbg="@Url.Content("~/images/" + imagePath)">
                                        <ul class="product__item__pic__hover">
                                            <li><a href="@Url.Action("Details", "Products", new { id = item.Id })"><i class="fa fa-eye"></i></a></li>
                                        </ul>
                                    </div>
                                    <div class="product__item__text">
                                        <h6><a asp-controller="Products" asp-action="Details" asp-route-Id="@item.Id">@item.Title</a></h6>
                                        <h5>@item.Price.ToString("N0")đ</h5>

                                    </div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="col-12 text-center">
                            <h3 style="center">Chưa có sản phẩm nào </h3>
                        </div>
                    }
                </div>
                <div class="product__pagination">
                    @for(int i = 1;i<= Model.PagingInfo.TotalPages;i++)
                    {
                        <a asp-controller="Products" asp-action="ProductInCategory" asp-route-CategoryId="@Model.categoryId" asp-route-productPage="@i">@i</a>
                    }
                    <a href="#"><i class="fa fa-long-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</section>







 
@*
View khi ProductInCategory phân trang
    
@using X.PagedList.Mvc.Core;
@model X.PagedList.IPagedList<Product>


    <section class="product spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12">
                    <div class="row">
                    @foreach (var item in Model)
                    {
                        <div class="col-lg-4 col-md-6 col-sm-6">
                            <div class="product__item">
                                <div class="product__item__pic set-bg" data-setbg="../LayoutUser/clients/img/product/product-1.jpg">
                                    <ul class="product__item__pic__hover">
                                        <li><a href="#"><i class="fa fa-heart"></i></a></li>
                                        <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                                        <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                                    </ul>
                                </div>
                                <div class="product__item__text">
                                    <h6><a asp-controller="Products" asp-action="Details" asp-route-Id="@item.Id">@item.Title</a></h6>
                                    <h5>@item.Price</h5>
                                    <h6>123</h6>
                                </div>
                            </div>
                        </div>
                    }
                    </div>
                <div class="product__pagination">
                    @Html.PagedListPager(Model, page => Url.Action("ProductInCategory", new { page = page , CategoryId = ViewBag.CategoryId }))
                </div>
                </div>
            </div>
        </div>
    </section>
*@